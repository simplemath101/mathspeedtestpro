<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathematics Quiz Speed Test</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #4cb5ae;
            --danger-color: #e74c3c;
            --success-color: #2ecc71;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --timer-height: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: #f5f7fa;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1.5rem;
            flex: 1;
        }

        .quiz-setup {
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
        }

        .quiz-setup h2 {
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .topic-selection {
            margin-bottom: 2rem;
        }

        .topic-selection label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: var(--secondary-color);
        }

        .topic-selection select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 1rem;
            color: var(--dark-color);
            background-color: var(--light-color);
            transition: border-color 0.3s;
        }

        .topic-selection select:focus {
            border-color: var(--accent-color);
            outline: none;
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .btn-start {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            background-color: var(--accent-color);
        }

        .btn-start:hover {
            background-color: #3a9d98;
        }

        .btn-next {
            background-color: var(--accent-color);
            color: white;
            margin-top: 1.5rem;
        }

        .btn-next:hover {
            background-color: #3a9d98;
        }

        .quiz-area {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        .timer-bar-container {
            height: var(--timer-height);
            background-color: #e0e0e0;
            width: 100%;
            border-radius: var(--timer-height);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .timer-bar {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: var(--timer-height);
            width: 100%;
            transition: width 1s linear;
        }

        .quiz-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            color: var(--secondary-color);
            font-weight: bold;
        }

        .question-container {
            margin-bottom: 1.5rem;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            line-height: 1.5;
            color: var(--dark-color);
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.8rem;
        }

        .option {
            padding: 1rem;
            background-color: var(--light-color);
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: var(--primary-color);
            background-color: #f0f5ff;
        }

        .option.selected {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .option.correct {
            background-color: var(--success-color);
            border-color: var(--success-color);
            color: white;
        }

        .option.incorrect {
            background-color: var(--danger-color);
            border-color: var(--danger-color);
            color: white;
        }

        .results {
            display: none;
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .results h2 {
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }

        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 1.5rem 0;
        }

        .result-details {
            margin: 1.5rem 0;
            text-align: left;
        }

        .result-detail {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .result-detail:last-child {
            border-bottom: none;
        }

        .restart-btn {
            background-color: var(--accent-color);
            color: white;
            margin-top: 1rem;
        }

        .restart-btn:hover {
            background-color: #3a9d98;
        }

        footer {
            background-color: var(--dark-color);
            color: var(--light-color);
            text-align: center;
            padding: 1.5rem 0;
            margin-top: auto;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }

            .container {
                padding: 0 1rem;
            }

            .quiz-setup, .quiz-area, .results {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Mathematics Quiz Speed Test</h1>
        <p>Test your mathematics knowledge against the clock!</p>
    </header>

    <div class="container">
        <!-- Quiz Setup Section -->
        <div class="quiz-setup" id="quiz-setup">
            <h2>Choose Your Quiz Topic</h2>
            <div class="topic-selection">
                <label for="topic-select">Select Mathematics Category:</label>
                <select id="topic-select">
                    <option value="">-- Select a topic --</option>
                    <option value="algebra">Algebra</option>
                    <option value="geometry">Geometry</option>
                    <option value="calculus">Calculus</option>
                    <option value="statistics">Statistics & Probability</option>
                    <option value="trigonometry">Trigonometry</option>
                    <option value="number-theory">Number Theory</option>
                    <option value="discrete-math">Discrete Mathematics</option>
                    <option value="linear-algebra">Linear Algebra</option>
                </select>
            </div>
            <button id="start-quiz" class="btn btn-start">Start Quiz</button>
        </div>

        <!-- Quiz Area Section -->
        <div class="quiz-area" id="quiz-area">
            <div class="timer-bar-container">
                <div class="timer-bar" id="timer-bar"></div>
            </div>
            <div class="quiz-progress">
                <span id="question-number">Question 1/10</span>
                <span id="time-display">60s</span>
            </div>
            <div class="question-container">
                <div class="question" id="question-text">
                    <!-- Question will be inserted here -->
                </div>
                <div class="options" id="options-container">
                    <!-- Options will be inserted here -->
                </div>
            </div>
            <button id="next-btn" class="btn btn-next">Next Question</button>
        </div>

        <!-- Results Section -->
        <div class="results" id="results">
            <h2>Quiz Results</h2>
            <div class="score-display"><span id="score">0</span>/10</div>
            <div class="result-details">
                <div class="result-detail">
                    <span>Topic:</span>
                    <span id="result-topic">-</span>
                </div>
                <div class="result-detail">
                    <span>Correct Answers:</span>
                    <span id="correct-answers">0</span>
                </div>
                <div class="result-detail">
                    <span>Incorrect Answers:</span>
                    <span id="incorrect-answers">0</span>
                </div>
                <div class="result-detail">
                    <span>Unanswered Questions:</span>
                    <span id="unanswered">0</span>
                </div>
                <div class="result-detail">
                    <span>Average Time Per Question:</span>
                    <span id="avg-time">0s</span>
                </div>
            </div>
            <button id="restart-btn" class="btn restart-btn">Take Another Quiz</button>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Mathematics Quiz Speed Test</p>
    </footer>

    <script>
        // Question Banks for Different Topics
        const questionBanks = {
    "algebra": [
        {
            question: "Solve for x in the equation 3x - 7 = 14",
            options: [
                "x = 5",
                "x = 7",
                "x = 8", 
                "x = 9"
            ],
            correctAnswer: 1
        },
        {
            question: "What is the factored form of x² - 9?",
            options: [
                "(x + 3)(x + 3)",
                "(x - 3)(x - 3)",
                "(x + 3)(x - 3)",
                "(x - 9)(x + 1)"
            ],
            correctAnswer: 2
        },
        {
            question: "If f(x) = 2x² + 3x - 5, what is f(2)?",
            options: [
                "3",
                "7",
                "9",
                "11"
            ],
            correctAnswer: 2
        },
        {
            question: "Solve the inequality 2x + 5 < 13",
            options: [
                "x < 4",
                "x < 9",
                "x > 4",
                "x < 8" 
            ],
            correctAnswer: 0
        },
        {
            question: "Which of the following is a solution to the equation x² - 5x + 6 = 0?",
            options: [
                "x = 2 only",
                "x = 3 only",
                "x = 2 and x = 3",
                "x = -2 and x = -3"
            ],
            correctAnswer: 2
        }
    ],
    "geometry": [
        {
            question: "What is the area of a circle with radius 5 units?",
            options: [
                "10π square units",
                "25π square units",
                "5π square units",
                "20π square units"
            ],
            correctAnswer: 1
        },
        {
            question: "In a right triangle, if one angle is 30° and another is 90°, what is the third angle?",
            options: [
                "45°",
                "60°",
                "75°",
                "30°"
            ],
            correctAnswer: 1
        },
        {
            question: "What is the perimeter of a rectangle with length 12 cm and width 5 cm?",
            options: [
                "17 cm",
                "34 cm",
                "60 cm",
                "24 cm"
            ],
            correctAnswer: 1
        },
        {
            question: "What is the volume of a cube with side length 4 units?",
            options: [
                "16 cubic units",
                "32 cubic units",
                "64 cubic units",
                "128 cubic units"
            ],
            correctAnswer: 2
        },
        {
            question: "Two angles are complementary. If one angle measures 25°, what is the measure of the other angle?",
            options: [
                "65°",
                "155°",
                "75°",
                "55°"
            ],
            correctAnswer: 0
        }
    ],
    "calculus": [
        {
            question: "What is the derivative of f(x) = x³?",
            options: [
                "f'(x) = x²",
                "f'(x) = 3x²",
                "f'(x) = 3x",
                "f'(x) = 3"
            ],
            correctAnswer: 1
        },
        {
            question: "What is ∫ 2x dx?",
            options: [
                "x² + C",
                "2x² + C",
                "x² - C",
                "x + C"
            ],
            correctAnswer: 0
        },
        {
            question: "What is the derivative of sin(x)?",
            options: [
                "cos(x)",
                "-sin(x)",
                "-cos(x)",
                "tan(x)"
            ],
            correctAnswer: 0
        },
        {
            question: "What is the limit of (1 + 1/n)^n as n approaches infinity?",
            options: [
                "0",
                "1",
                "e",
                "∞"
            ],
            correctAnswer: 2
        },
        {
            question: "Which of the following is the integral of e^x?",
            options: [
                "e^x + C",
                "xe^x + C",
                "e^(x+1) + C",
                "ln(x) + C"
            ],
            correctAnswer: 0
        }
    ],
    "statistics": [
        {
            question: "What is the median of the data set: 3, 7, 8, 9, 12?",
            options: [
                "3",
                "7",
                "8",
                "9"
            ],
            correctAnswer: 2
        },
        {
            question: "What is the probability of rolling a 6 on a fair six-sided die?",
            options: [
                "1/2",
                "1/3",
                "1/6",
                "1/8"
            ],
            correctAnswer: 2
        },
        {
            question: "Which measure of central tendency is most affected by extreme values?",
            options: [
                "Mean",
                "Median",
                "Mode",
                "Range"
            ],
            correctAnswer: 0
        },
        {
            question: "A normal distribution has a mean of 50 and a standard deviation of 10. What percentage of the data falls within one standard deviation of the mean?",
            options: [
                "Approximately 50%",
                "Approximately 68%",
                "Approximately 95%",
                "Approximately 99.7%"
            ],
            correctAnswer: 1
        },
        {
            question: "What does a correlation coefficient of -0.9 indicate?",
            options: [
                "Strong positive correlation",
                "Weak positive correlation",
                "Weak negative correlation",
                "Strong negative correlation"
            ],
            correctAnswer: 3
        }
    ],
    "trigonometry": [
        {
            question: "What is sin(30°)?",
            options: [
                "1",
                "1/2",
                "√3/2",
                "0"
            ],
            correctAnswer: 1
        },
        {
            question: "What is the value of cos(90°)?",
            options: [
                "0",
                "1",
                "-1",
                "Undefined"
            ],
            correctAnswer: 0
        },
        {
            question: "In a right triangle, if sin(θ) = 3/5, what is cos(θ)?",
            options: [
                "3/5",
                "4/5",
                "5/3",
                "5/4"
            ],
            correctAnswer: 1
        },
        {
            question: "What is the period of the function f(x) = sin(2x)?",
            options: [
                "π",
                "2π",
                "π/2",
                "4π"
            ],
            correctAnswer: 0
        },
        {
            question: "Which of the following identities is correct?",
            options: [
                "sin²(θ) + cos²(θ) = 2",
                "sin²(θ) - cos²(θ) = 1",
                "sin²(θ) + cos²(θ) = 1",
                "sin(θ) + cos(θ) = 1"
            ],
            correctAnswer: 2
        }
    ],
    "number-theory": [
        {
            question: "What is the greatest common divisor (GCD) of 48 and 72?",
            options: [
                "6",
                "12",
                "24",
                "36"
            ],
            correctAnswer: 2
        },
        {
            question: "Which of the following numbers is prime?",
            options: [
                "51",
                "57",
                "87",
                "83"
            ],
            correctAnswer: 3
        },
        {
            question: "What is the least common multiple (LCM) of 8 and 12?",
            options: [
                "4",
                "24",
                "48",
                "96"
            ],
            correctAnswer: 1
        },
        {
            question: "How many divisors does the number 28 have?",
            options: [
                "2",
                "4",
                "6",
                "8"
            ],
            correctAnswer: 2
        },
        {
            question: "Which of the following is a perfect square?",
            options: [
                "24",
                "48",
                "49",
                "50"
            ],
            correctAnswer: 2
        }
    ],
    "discrete-math": [
        {
            question: "In how many ways can 5 different books be arranged on a shelf?",
            options: [
                "5",
                "10",
                "25",
                "120"
            ],
            correctAnswer: 3
        },
        {
            question: "What is the negation of the statement 'If it is raining, then the ground is wet'?",
            options: [
                "If it is not raining, then the ground is not wet",
                "If the ground is not wet, then it is not raining",
                "It is raining and the ground is not wet",
                "It is not raining and the ground is wet"
            ],
            correctAnswer: 2
        },
        {
            question: "How many different 4-digit numbers can be formed using the digits 1, 2, 3, 4, 5 without repetition?",
            options: [
                "24",
                "120",
                "625",
                "1024"
            ],
            correctAnswer: 1
        },
        {
            question: "Which of the following is a binary operation?",
            options: [
                "f(x) = x²",
                "g(x,y) = x + y",
                "h(x,y,z) = xyz",
                "j(x) = 1/x"
            ],
            correctAnswer: 1
        },
        {
            question: "In a group of 6 people, how many different ways can a committee of 3 people be formed?",
            options: [
                "18",
                "20",
                "36",
                "720"
            ],
            correctAnswer: 1
        }
    ],
    "linear-algebra": [
        {
            question: "What is the determinant of the matrix [[3, 2], [1, 4]]?",
            options: [
                "5",
                "10",
                "12",
                "14"
            ],
            correctAnswer: 1
        },
        {
            question: "Which of the following matrices is singular?",
            options: [
                "[[1, 2], [3, 4]]",
                "[[2, 4], [1, 2]]",
                "[[1, 0], [0, 1]]",
                "[[3, 1], [2, 5]]"
            ],
            correctAnswer: 1
        },
        {
            question: "What is the rank of a 3×3 identity matrix?",
            options: [
                "0",
                "1",
                "2",
                "3"
            ],
            correctAnswer: 3
        },
        {
            question: "If A is a 2×3 matrix and B is a 3×4 matrix, what is the size of the product AB?",
            options: [
                "2×3",
                "3×4",
                "2×4",
                "3×2"
            ],
            correctAnswer: 2
        },
        {
            question: "What are the eigenvalues of the matrix [[2, 0], [0, 5]]?",
            options: [
                "2 and 5",
                "0 and 0",
                "2 and 0",
                "5 and 0"
            ],
            correctAnswer: 0
        }
    ]
};

        // Quiz Parameters
        const QUESTIONS_PER_QUIZ = 10;
        const TIME_PER_QUESTION = 60; // seconds

        // Quiz State Variables
        let currentQuiz = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft;
        let selectedTopic = "";
        let selectedOption = null;
        let answered = false;
        let questionStartTime;
        let totalTimeSpent = 0;
        let answeredQuestions = 0;

        // DOM Elements
        const quizSetupEl = document.getElementById('quiz-setup');
        const quizAreaEl = document.getElementById('quiz-area');
        const resultsEl = document.getElementById('results');
        const topicSelectEl = document.getElementById('topic-select');
        const startQuizBtn = document.getElementById('start-quiz');
        const timerBarEl = document.getElementById('timer-bar');
        const timeDisplayEl = document.getElementById('time-display');
        const questionNumberEl = document.getElementById('question-number');
        const questionTextEl = document.getElementById('question-text');
        const optionsContainerEl = document.getElementById('options-container');
        const nextBtn = document.getElementById('next-btn');
        const scoreEl = document.getElementById('score');
        const resultTopicEl = document.getElementById('result-topic');
        const correctAnswersEl = document.getElementById('correct-answers');
        const incorrectAnswersEl = document.getElementById('incorrect-answers');
        const unansweredEl = document.getElementById('unanswered');
        const avgTimeEl = document.getElementById('avg-time');
        const restartBtn = document.getElementById('restart-btn');

        // Event Listeners
        startQuizBtn.addEventListener('click', startQuiz);
        nextBtn.addEventListener('click', nextQuestion);
        restartBtn.addEventListener('click', resetQuiz);

        // Initialize Function
        function initialize() {
            // Disable start button until a topic is selected
            startQuizBtn.disabled = true;
            startQuizBtn.style.opacity = "0.6";
            startQuizBtn.style.cursor = "not-allowed";

            // Enable start button when a topic is selected
            topicSelectEl.addEventListener('change', function() {
                if (this.value) {
                    startQuizBtn.disabled = false;
                    startQuizBtn.style.opacity = "1";
                    startQuizBtn.style.cursor = "pointer";
                } else {
                    startQuizBtn.disabled = true;
                    startQuizBtn.style.opacity = "0.6";
                    startQuizBtn.style.cursor = "not-allowed";
                }
            });
        }

        // Start Quiz Function
        function startQuiz() {
            selectedTopic = topicSelectEl.value;
            if (!selectedTopic) return;

            // Getting readable topic name
            const readableTopic = topicSelectEl.options[topicSelectEl.selectedIndex].text;
            resultTopicEl.textContent = readableTopic;

            // Check if topic has questions
            if (questionBanks[selectedTopic].length === 0) {
                alert("No questions available for this topic yet. Please choose another topic or check back later.");
                return;
            }

            // Show quiz area, hide setup and results
            quizSetupEl.style.display = 'none';
            quizAreaEl.style.display = 'block';
            resultsEl.style.display = 'none';

            // Reset quiz state
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions = 0;
            totalTimeSpent = 0;

            // Create quiz with random questions
            createRandomQuiz();

            // Display first question
            displayQuestion();
        }

        // Create Random Quiz Function
        function createRandomQuiz() {
            // Get all questions for selected topic
            const allQuestions = questionBanks[selectedTopic].slice();
            
            // Shuffle array
            for (let i = allQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [allQuestions[i], allQuestions[j]] = [allQuestions[j], allQuestions[i]];
            }
            
            // Take first 10 questions or all if less than 10
            currentQuiz = allQuestions.slice(0, QUESTIONS_PER_QUIZ);
            
            // If less than 10 questions available, alert user
            if (currentQuiz.length < QUESTIONS_PER_QUIZ) {
                alert(`Only ${currentQuiz.length} questions available for this topic. The quiz will proceed with the available questions.`);
            }
        }

        // Display Question Function
        function displayQuestion() {
            // Reset state for new question
            answered = false;
            selectedOption = null;
            questionStartTime = Date.now();
            
            // Get current question
            const currentQuestion = currentQuiz[currentQuestionIndex];
            
            // Update question number display
            questionNumberEl.textContent = `Question ${currentQuestionIndex + 1}/${currentQuiz.length}`;
            
            // Display question
            questionTextEl.textContent = currentQuestion.question;
            
            // Clear previous options
            optionsContainerEl.innerHTML = '';
            
            // Shuffle options
            const shuffledOptions = [...currentQuestion.options];
            for (let i = shuffledOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
            }
            
            // Create option elements
            shuffledOptions.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.classList.add('option');
                optionEl.textContent = option;
                optionEl.dataset.index = index;
                
                optionEl.addEventListener('click', function() {
                    if (answered) return;
                    
                    // Clear previous selection
                    document.querySelectorAll('.option').forEach(el => {
                        el.classList.remove('selected');
                    });
                    
                    // Mark as selected
                    this.classList.add('selected');
                    selectedOption = this.textContent;
                });
                
                optionsContainerEl.appendChild(optionEl);
            });
            
            // Start timer
            startTimer();
        }

        // Start Timer Function
        function startTimer() {
            // Reset timer
            timeLeft = TIME_PER_QUESTION;
            updateTimerDisplay();
            
            // Reset timer bar
            timerBarEl.style.width = '100%';
            timerBarEl.style.backgroundColor = 'var(--primary-color)';
            
            // Clear any existing timer
            if (timer) clearInterval(timer);
            
            // Start new timer
            timer = setInterval(function() {
                timeLeft--;
                updateTimerDisplay();
                
                // Update timer bar
                const percentage = (timeLeft / TIME_PER_QUESTION) * 100;
                timerBarEl.style.width = `${percentage}%`;
                
                // Change color when time is running out
                if (timeLeft <= 10) {
                    timerBarEl.style.backgroundColor = 'var(--danger-color)';
                }
                
                // Time's up
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    handleAnswer(null); // No answer selected
                }
            }, 1000);
        }

        // Update Timer Display Function
        function updateTimerDisplay() {
            timeDisplayEl.textContent = `${timeLeft}s`;
        }

        // Handle Answer Function
        function handleAnswer(selectedAnswer) {
            // Stop the timer
            clearInterval(timer);
            
            // Mark as answered
            answered = true;
            
            // Calculate time spent on this question
            const timeSpent = Math.min(TIME_PER_QUESTION, TIME_PER_QUESTION - timeLeft);
            totalTimeSpent += timeSpent;
            
            if (selectedAnswer) {
                answeredQuestions++;
                
                // Get current question
                const currentQuestion = currentQuiz[currentQuestionIndex];
                
                // Check if answer is correct
                const isCorrect = selectedAnswer === currentQuestion.answer;
                
                // Update score
                if (isCorrect) score++;
                
                // Mark options
                document.querySelectorAll('.option').forEach(option => {
                    if (option.textContent === currentQuestion.answer) {
                        option.classList.add('correct');
                    } else if (option.textContent === selectedAnswer && !isCorrect) {
                        option.classList.add('incorrect');
                    }
                });
            }
        }

        // Next Question Function
        function nextQuestion() {
            // If not answered yet, handle the selected answer
            if (!answered && selectedOption) {
                handleAnswer(selectedOption);
                return;
            }
            
            // If time ran out and no answer selected
            if (!answered) {
                handleAnswer(null);
                return;
            }
            
            // Move to next question or end quiz if all questions answered
            currentQuestionIndex++;
            
            if (currentQuestionIndex < currentQuiz.length) {
                displayQuestion();
            } else {
                showResults();
            }
        }

        // Show Results Function
        function showResults() {
            // Hide quiz area, show results
            quizAreaEl.style.display = 'none';
            resultsEl.style.display = 'block';
            
            // Update results
            scoreEl.textContent = score;
            correctAnswersEl.textContent = score;
            incorrectAnswersEl.textContent = answeredQuestions - score;
            unansweredEl.textContent = currentQuiz.length - answeredQuestions;
            
            // Calculate average time spent per question
            const avgTime = answeredQuestions ? Math.round(totalTimeSpent / answeredQuestions) : 0;
            avgTimeEl.textContent = `${avgTime}s`;
        }

        // Reset Quiz Function
        function resetQuiz() {
            // Hide results, show setup
            resultsEl.style.display = 'none';
            quizSetupEl.style.display = 'block';
            
            // Reset topic select
            topicSelectEl.value = "";
            
            // Disable start button
            startQuizBtn.disabled = true;
            startQuizBtn.style.opacity = "0.6";
            startQuizBtn.style.cursor = "not-allowed";
        }

        // Initialize on page load
        window.addEventListener('load', initialize);
    </script>
</body>
</html>
